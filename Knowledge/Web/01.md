<!-- TOC -->

- [HTTP Method - PUT vs PATCH](#http-method---put-vs-patch)
  - [주요 메소드 5가지](#%EC%A3%BC%EC%9A%94-%EB%A9%94%EC%86%8C%EB%93%9C-5%EA%B0%80%EC%A7%80)
  - [기타 메소드 4가지](#%EA%B8%B0%ED%83%80-%EB%A9%94%EC%86%8C%EB%93%9C-4%EA%B0%80%EC%A7%80)
  - [멱등성, PUT vs PATCH](#%EB%A9%B1%EB%93%B1%EC%84%B1-put-vs-patch)
  - [예시](#%EC%98%88%EC%8B%9C)
    - [PUT](#put)
    - [PATCH](#patch)

<!-- /TOC -->

# HTTP Method - PUT vs PATCH
HTTP Method에는 여러 가지가 있다.  

## 주요 메소드 5가지
  - GET : 리소스 조회  
  - POST : 요청 데이터 처리, 주로 데이터 등록에 사용
  - DELETE : 리소스 삭제
  - PUT : 리소스를 대체, 해당 리소스가 없으면 생성
  - PATCH : 리소스의 일부만 변경

## 기타 메소드 4가지
  - HEAD : GET과 동일하지만 본문을 제외하고, 상태줄과 헤더만 반환
  - OPTIONS : 대상 리소스에 대한 통신 설정하는데 사용
  - CONNECT : 대상 리소스로 식별되는 서버에 대한 터널 생성
  - TRACE : 대상 시소스에 대한 경로를 따라 메시지 루프백 테스트를 수행

## 멱등성, PUT vs PATCH
리소스를 사용 하는 용도로 사용하는 메서드인 PUT과 PATCH의 차이점에 대해서 다루어 보고자 한다.  

PUT과 PATCH의 가장 큰 차이점은 멱등성인데, **멱등성**이란 동일한 요청을 한 번 보내는 것과 여러 번 연속으로 보내는 것이 같은 효과를 지니면서, 서버의 상태도 동일하게 남았을때, 해당 HTTP 메서드는 멱등성을 가졌다고 말한다.  

올바르게 구현하였을 경우 **GET**, **HEAD**, **PUT**, **DELETE** 메서드는 멱등성을 가지며, **POST**, **PATCH**는 멱등성을 가지지 못한다.

- GET / HEAD : 리소스를 조회하며, 서버의 상태가 변하지 않고 같은 효과를 기대한다.
- DELETE : 리소스가 존재하든 존재하지 않든 그 데이터는 DELETE 요청을 보낸 시점에서 사라진 상태를 유지한다.  
  리소스 유무에 따라 상태 코드는 응답마다 달라질 수 있지만, 그럼에도 멱등성을 가진다.  
  리소스 존재시 200, 리소스 미존재시 404
- PUT : PUT 요청시 요청한 리소스가 없으면 추가, 있으면 업데이트한다.

위에 멱등성을 가지는 메서드들을 보면 고개를 자연스레 끄덕이게 된다.  
하지만, PATCH도 업데이는를 하는데 왜 멱등성을 지니지 못할까라고 생각하게 된다.  

정확히 말하면 **PATCH는 멱등성을 가지게 할 수도 있다.**  
PUT을 올바르게 구현하려면 리소스에 요청된 데이터를 할당하여 업데이트 해야한다.  
PATCH도 PUT의 구현 방식을 따르면 멱등성을 가지게 된다.  

PATCH는 기존 리소스를 활용해서 연산 후 할당하여 업데이트를 하는 것이 허용되는데   
이때는 멱등성을 가지지 못하게 된다.  

## 예시
다음과 같은 데이터가 있을때 PUT과 PATCH를 비교 해보자.
``` javascript
{
  id:1,
  name:'홍길동',
  age: 20,
  genter: M
}
```

### PUT
PUT 요청시 모든 데이터를 전달하는 것을 원칙으로하며,  
전달되지 않은 값에 대해서는 null값이 할당된다.  
``` javascript
// 요청
PUT /members/1
{
  name : "홍길동",
  age : 21,
}

// 결과
{
  id:1,
  name:'홍길동',
  age: 21,
  gender: null
}
```

### PATCH
부분 수정할 값을 전달하며  
아래 예시와 같이 기존 데이터를 통해서 연산후 할당하게 되면  
멱등성을 가지지 못한다.
``` javascript
// 요청
PATCH /members/1
{
  gender: !gender
}

// 결과
{
  id:1,
  name:'홍길동',
  age: 20,
  gender: F
}
```